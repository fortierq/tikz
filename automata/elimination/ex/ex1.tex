\documentclass[convert={outfile=\jobname.png}]{standalone}
\usepackage{base}
\usepackage{draw}

\begin{document}

\begin{tikzpicture}[automata]
	\node[state, draw=none] (1) {};
	\node[state, initial, left of=1] (i) {$q_i$};
	\node[state, right of=1] (2) {$2$};
	\node[state, right of=2, accepting] (f) {$q_f$};
	\node[state, below of=1] (3) {$3$};
	\node[state, right of=3] (4) {$4$};
	\draw 
    (i) edge[left] node{$a$} (3)
	(2) edge[left, bend right] node{$a$} (4)
	(3) edge[above, bend left] node{$b$} (4)
	(4) edge[below, bend left] node{$ba$} (3)
	(4) edge[right, bend right] node{$ba$} (2)
	(4) edge[loop right] node{$b$} (4)
	(2) edge[above] node{$\epsilon$} (f);
\end{tikzpicture}

\end{document}
